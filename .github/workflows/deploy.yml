image: node:latest

before_script:
 - npm prune
 - npm install
 - npm install -g grunt-cli
 - npm install -g firebase-tools

stages:
  - deploy

cache:
  paths:
    - node_modules/
  key: "$CI_BUILD_REPO"


deploy_to_firebase:
 stage: deploy
 only:
  - master
 script:
  - grunt all
  - firebase deploy --token ${{ secrets.FIREBASE_TOKEN }}
